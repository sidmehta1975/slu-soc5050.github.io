<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Week 12 - Bivarite Regression - SOC 4930 &amp; SOC 5050</title>
    <meta name="generator" content="Hugo 0.30" />

    
    <meta name="description" content="SOC 4930 &amp; SOC 5050: Quantiative Analysis - Applied Inferential Statistics">
    
    <link rel="canonical" href="/week-12/">
    
    <meta name="author" content="Christopher Prener, Ph.D.">
    

    <meta property="og:url" content="/week-12/">
    <meta property="og:title" content="SOC 4930 &amp; SOC 5050">
    <meta property="og:image" content="/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="SOC 4930 &amp; SOC 5050">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('/fonts/icon.eot');
        src: url('/fonts/icon.eot')
               format('embedded-opentype'),
             url('/fonts/icon.woff')
               format('woff'),
             url('/fonts/icon.ttf')
               format('truetype'),
             url('/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="/stylesheets/application.css">
    <link rel="stylesheet" href="/stylesheets/temporary.css">
    <link rel="stylesheet" href="/stylesheets/palettes.css">
    <link rel="stylesheet" href="/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="/javascripts/modernizr.js"></script>

    

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.4/gist-embed.min.js"></script>
  </head>
  <body class="palette-primary-deep-orange palette-accent-blue">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Week 12 - Bivarite Regression
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/slu-soc5050" title="@slu-soc5050 on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/slu-soc5050/Core-Documents" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="/images/logo.png">
        </div>
      
      <div class="name">
        <strong>SOC 4930 &amp; SOC 5050 </strong>
        
          <br>
          slu-soc5050/Core-Documents
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/slu-soc5050/Core-Documents/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/slu-soc5050/Core-Documents/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="About" href="/">
	
	About
</a>



  
</li>



<li>
  
    



<a  title="Course Resources" href="/course-resources/">
	
	Course Resources
</a>



  
</li>



<li>
  
    



<a  title="Getting Started" href="/getting-started/">
	
	Getting Started
</a>



  
</li>



<li>
  
    



<a  title="Week 01 - Course Introduction" href="/week-01/">
	
	Week 01 - Course Introduction
</a>



  
</li>



<li>
  
    



<a  title="Week 02 - Working with Data (1)" href="/week-02/">
	
	Week 02 - Working with Data (1)
</a>



  
</li>



<li>
  
    



<a  title="Week 03 - Distributions" href="/week-03/">
	
	Week 03 - Distributions
</a>



  
</li>



<li>
  
    



<a  title="Week 04 - Probability" href="/week-04/">
	
	Week 04 - Probability
</a>



  
</li>



<li>
  
    



<a  title="Week 05 - Random Variables" href="/week-05/">
	
	Week 05 - Random Variables
</a>



  
</li>



<li>
  
    



<a  title="Week 06 - Inference" href="/week-06/">
	
	Week 06 - Inference
</a>



  
</li>



<li>
  
    



<a  title="Week 07 - Mean Difference (1)" href="/week-07/">
	
	Week 07 - Mean Difference (1)
</a>



  
</li>



<li>
  
    



<a  title="Week 08 - Mean Difference (2)" href="/week-08/">
	
	Week 08 - Mean Difference (2)
</a>



  
</li>



<li>
  
    



<a  title="Week 10 - Correlation (1)" href="/week-10/">
	
	Week 10 - Correlation (1)
</a>



  
</li>



<li>
  
    



<a  title="Week 11 - Correlation (2)" href="/week-11/">
	
	Week 11 - Correlation (2)
</a>



  
</li>



<li>
  
    



<a class="current" title="Week 12 - Bivariate Regression" href="/week-12/">
	
	Week 12 - Bivariate Regression
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="Week 13 - Multiple Regression (1)" href="/week-13/">
	
	Week 13 - Multiple Regression (1)
</a>



  
</li>



<li>
  
    



<a  title="Week 14 - Multiple Regression (2)" href="/week-14/">
	
	Week 14 - Multiple Regression (2)
</a>



  
</li>



<li>
  
    



<a  title="Week 15 - ANOVA" href="/week-15/">
	
	Week 15 - ANOVA
</a>



  
</li>



<li>
  
    



<a  title="Week 16 - Chi-Squared" href="/week-16/">
	
	Week 16 - Chi-Squared
</a>



  
</li>



<li>
  
    



<a  title="License" href="/license/">
	
	License
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/slu-soc5050" target="_blank" title="@slu-soc5050 on GitHub">
              @slu-soc5050 on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:chris.prener@slu.edu" title="Email of chris.prener@slu.edu">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Week 12 - Bivarite Regression </h1>

			

<p><img src="https://img.shields.io/badge/semester-Fall%2C%202017-blue.svg" alt="" /> <img src="https://img.shields.io/badge/release-updated-brightgreen.svg" alt="" /></p>

<h2 id="handouts">Handouts</h2>

<p><a class="btn btn-primary btn-outline btn-xs{{end}}" href="https://github.com/slu-soc5050/Week-12/blob/master/Functions/week-12-r.pdf" target="_blank"> Functions </a>
<a class="btn btn-primary btn-outline btn-xs{{end}}" href="https://github.com/slu-soc5050/Week-12/blob/master/Lab/week-12-lab.pdf" target="_blank"> Lab </a>
<a class="btn btn-primary btn-outline btn-xs{{end}}" href="https://github.com/slu-soc5050/Week-12/blob/master/LaTeX/week-12-latex.pdf" target="_blank"> LaTeX </a>
<a class="btn btn-primary btn-outline btn-xs{{end}}" href="https://github.com/slu-soc5050/Week-12/blob/master/PS-09/ps-09.pdf" target="_blank"> PS-09 </a></p>

<h2 id="lecture-slides">Lecture Slides</h2>

<script async class='speakerdeck-embed' data-id='f870f78829704a1eb67e01eb26f58cbe' data-ratio='1.33333333333333' src='//speakerdeck.com/assets/embed.js'></script>

<h2 id="some-example-code-for-class">Some Example Code for Class</h2>

<script data-gist-id="f4fcfbe4eaa4dc495bfad2402301f5b5"></script>

<h2 id="more-on-plots">More on Plots</h2>

<h3 id="line-breaks-in-plot-text">Line Breaks in Plot Text</h3>

<p>We discussed this informally in class, and I wanted to clarify the technique for adding line breaks here. In situations where the size of the text has been increased or the quantity of text is quite large (a lengthy caption, for example), it is easy for the text to run off the sides of the plot. You can force a line break in text within <code>ggplot2</code> using the <code>\n</code> operator:</p>

<pre><code>library(ggplot2)

ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
  geom_point(mapping = aes(color = as.factor(cyl)), size = 2, position = &quot;jitter&quot;) +
  geom_smooth(method = &quot;lm&quot;) +
  labs(
    title = &quot;Fuel Efficiency and Engine Size \nof Consumer Automobiles&quot;,
    subtitle = &quot;Select Vehicles Sold in the United States&quot;,
    x = &quot;Engine Displacement (litres)&quot;,
    y = &quot;Highway Fuel Efficiency (mpg)&quot;
  )
</code></pre>

<p><img src="/images/week-12-image01.png" alt="image" /></p>

<p>This example clearly does not call for the line break, since the text would not have run off the side of the plot. Adding the break here therefore only serves to sacrifice the amount of space that can be dedicated to the data themselves because it shrinks the available real estate for the main portion of the plot.</p>

<h3 id="changing-the-color-palette">Changing the Color Palette</h3>

<p>A question was asked this week about changing <code>ggplot2</code>&rsquo;s default colors. With simple plots, I do not advocate selecting your own colors. Instead, I want to point you towards a <code>R</code> package called <code>RColorBrewer</code> that can help you naviagte this process. You&rsquo;ll need to download and install it on your own. Once you have loaded it with the <code>library()</code> function, you can display all of the available palettes with the following function:</p>

<pre><code>display.brewer.all()
</code></pre>

<p><img src="/images/week-12-image02.png" alt="image" /></p>

<p>There are three groups of palettes. The first group are all color ramps that go from light to dark. These are for use with continuous data. The second group, beginning with <code>Set3</code> are qualitative palettes that are designed to be used with discrete data. The third group, beginning with <code>Spectral</code>, are divergent color ramps that are designed to be used with continuous data that have a defined midpoint (such as a mean of 0) where highlight more extreme values above or below the midpoint is advantageous. For the plots in this class, we <em>typically</em> want to use one of the qualitative palettes in the middle.</p>

<p>We can add a palette to our plot with the <code>scale_color_brewer()</code> function. At a minimum, we need to specify the palette we want to draw from. The palette name comes from the image above, obtained using <code>display.brewer.all()</code>:</p>

<pre><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
  geom_point(mapping = aes(color = as.factor(cyl)), size = 2, position = &quot;jitter&quot;) +
  geom_smooth(method = &quot;lm&quot;) +
  labs(
    title = &quot;Fuel Efficiency and Engine Size&quot;,
    subtitle = &quot;Select Vehicles Sold in the United States&quot;,
    x = &quot;Engine Displacement (litres)&quot;,
    y = &quot;Highway Fuel Efficiency (mpg)&quot;
  ) +
  scale_color_brewer(palette = &quot;Dark2&quot;)
</code></pre>

<p><img src="/images/week-12-image03.png" alt="image" /></p>

<p>This plot uses a nice selection of darker hues that I find particularly pleasing. Keen observers will note, now, that the linear model line no longer goes well with our plot design - the blue is too bright. The <code>Dark2</code> palette has eight colors in it (there are eight boxes displayed using <code>display.brewer.all()</code>), and the first four colors are automatically selected to inclusion in the plot to color the points. We could therefore select the fifth color for the linear model. We can get the color&rsquo;s hex value using the <code>brewer.pal()</code> function:</p>

<pre><code>&gt; brewer.pal(5, name = &quot;Dark2&quot;)
[1] &quot;#1B9E77&quot; &quot;#D95F02&quot; &quot;#7570B3&quot; &quot;#E7298A&quot; &quot;#66A61E&quot;
</code></pre>

<p>We include the number <code>5</code> to indicate that we want to see the first five of the eight colors. To see all eight hues in the palette, we would replace the <code>5</code> with an <code>8</code>. We can take the fifth reported hex value (<code>#66A61E</code>) and add it to the <code>geom_smooth()</code> function:</p>

<pre><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
  geom_point(mapping = aes(color = as.factor(cyl)), size = 2, position = &quot;jitter&quot;) +
  geom_smooth(method = &quot;lm&quot;, color = &quot;#66A61E&quot;) +
  labs(
    title = &quot;Fuel Efficiency and Engine Size&quot;,
    subtitle = &quot;Select Vehicles Sold in the United States&quot;,
    x = &quot;Engine Displacement (litres)&quot;,
    y = &quot;Highway Fuel Efficiency (mpg)&quot;
  ) +
  scale_color_brewer(palette = &quot;Dark2&quot;)
</code></pre>

<p><img src="/images/week-12-image04.png" alt="image" /></p>

<p>The result is not the most asthetically pleasing, but the colors are consistent in tone. We could either select another single huge from one of the other color ramps in <code>RColorBrewer</code> or opt to select a similar hue using a second tool, <a href="http://www.colorhexa.com">colorhexa</a>. Colorhexa is a fantastic website with a wide variety of tools for selecting colors, and it is my go-to choice for making color decisions. We can look <code>#66A61E</code> on colorhexa (here is a link to <a href="http://www.colorhexa.com/66a61e">the page</a>). If we scroll down to &ldquo;Color Schemes with #66a61e&rdquo;, we see these schemes:</p>

<p><img src="/images/week-12-image-06.png" alt="image" /></p>

<p>I like the the blue color suggested here under the Triadic color scheme. You can hover your mouse over it to reveal the hex value, which is <code>#1E66A6</code>. You can substitute this hex value in under <code>geom_smooth()</code> to produce the following plot:</p>

<pre><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
  geom_point(mapping = aes(color = as.factor(cyl)), size = 2, position = &quot;jitter&quot;) +
  geom_smooth(method = &quot;lm&quot;, color = &quot;#1E66A6&quot;) +
  labs(
    title = &quot;Fuel Efficiency and Engine Size&quot;,
    subtitle = &quot;Select Vehicles Sold in the United States&quot;,
    x = &quot;Engine Displacement (litres)&quot;,
    y = &quot;Highway Fuel Efficiency (mpg)&quot;
  ) +
  scale_color_brewer(palette = &quot;Dark2&quot;)
</code></pre>

<p><img src="/images/week-12-image05.png" alt="image" /></p>

<p>The selected blue is not as bright as the original blue used by <code>ggplot2</code>, and therefore fits in more consistently with the <code>Dark2</code> palette from <code>RColorBrewer</code>.</p>

<h3 id="changing-both-the-color-palette-and-the-legend">Changing Both the Color Palette and the Legend</h3>

<p>In class, we discussed using the <code>scale_color_discrete()</code> function to change the lenged text. If you use <code>scale_color_brewer()</code> to alter the plot&rsquo;s color palette, you will not be able to simultaneously call <code>scale_color_discrete()</code>. Legend labels will therefore need to be adjusted like so:</p>

<pre><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
  geom_point(mapping = aes(color = as.factor(cyl)), size = 2, position = &quot;jitter&quot;) +
  geom_smooth(method = &quot;lm&quot;, color = &quot;#1E66A6&quot;) +
  labs(
    title = &quot;Fuel Efficiency and Engine Size&quot;,
    subtitle = &quot;Select Vehicles Sold in the United States&quot;,
    x = &quot;Engine Displacement (litres)&quot;,
    y = &quot;Highway Fuel Efficiency (mpg)&quot;
  ) +
  scale_color_brewer(palette = &quot;Dark2&quot;, labels = c(&quot;Four&quot;, &quot;Five&quot;, &quot;Six&quot;, &quot;Eight&quot;))
</code></pre>

<p><img src="/images/week-12-image07.png" alt="image" /></p>

<h2 id="lm-independent-variables"><code>lm()</code> Independent Variables</h2>

<p>We did not discuss how to add multiple indpendent variables into the <code>lm()</code> function this week, but you will need that skill for the problem set. To add multiple independent variables, use the <code>+</code> sign on the righthand side of the equation:</p>

<pre><code>lm(y ~ x1+x2, data = df)
</code></pre>

<p>In PS-09, this would be used to add in both dummary logial variables.</p>


			<aside class="copyright" role="note">
				
				&copy; 2017 Licensed under a Creative Commons Attribution 4.0 International License &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="/week-11/" title="Week 11 - Correlation (Part 2)">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Week 11 - Correlation (Part 2)
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="/week-13/" title="Week 13 - Multiple Regression (1)">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Week 13 - Multiple Regression (1)
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '\/';
      var repo_id  = 'slu-soc5050\/Core-Documents';
    
    </script>

    <script src="/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

